<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/272632; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4001"/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><h1 style="color: rgb(64, 64, 64); margin: 0px; line-height: 1.5em; font-size: 24px; font-family: &apos;Helvetica Neue&apos;, Helvetica, Arial, sans-serif; widows: 1; background-color: rgb(255, 255, 255);">Reading and Writing tabular ASCII data<a href="https://python4astronomers.github.io/files/asciifiles.html#reading-and-writing-tabular-ascii-data" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h1><p style="font-size: 13px; line-height: 18px; margin-top: 0px; margin-bottom: 9px; color: rgb(64, 64, 64); font-family: &apos;Helvetica Neue&apos;, Helvetica, Arial, sans-serif; widows: 1; background-color: rgb(255, 255, 255);">Astronomers love storing tabular data in human-readable ASCII tables. Unfortunately there is very little agreement on a standard way to do this, unlike e.g. FITS.</p><div style="color: rgb(64, 64, 64); font-family: &apos;Helvetica Neue&apos;, Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; widows: 1; background-color: rgb(255, 255, 255);"><h2 style="margin: 1em 0px 0.5em; line-height: 1.2em; font-size: 21px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(64, 64, 64);">Pure Python<a href="https://python4astronomers.github.io/files/asciifiles.html#pure-python" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h2><div><h3 style="margin: 0.7em 0px 0px; line-height: 1.5em; font-size: 18px;">Reading<a href="https://python4astronomers.github.io/files/asciifiles.html#reading" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h3><p style="margin-top: 0px; margin-bottom: 9px;">We have already talked about <a href="https://python4astronomers.github.io/python/types.html#python-built-in-types-and-operations" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;"><em style="line-height: inherit;">Python Built-in Types and Operations</em></a>, but there are more types that we did not speak about. One of these is the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">file()</tt> object which can be used to read or write files.</p><p style="margin-top: 0px; margin-bottom: 9px;">Let’s start off by downloading <a href="https://python4astronomers.github.io/_downloads/data.txt" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;"><tt style="margin: 0px 2px; padding: 0px 1px; border: none; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; font-weight: bold; background-color: transparent;">this</tt></a> data file, then launching IPython the directory where you have the file:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
$ ipython --matplotlib
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Do the usual imports of numpy and matplotlib:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">numpy</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">as</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">np</span><span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">matplotlib.pyplot</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">as</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">plt</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">If you have trouble downloading the file, then from within IPython enter:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">astropy.extern.six.moves.urllib</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> requesturl <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(64, 112, 160);">'http://python4astronomers.github.com/_downloads/data.txt'</span><span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'wb'</span>)<span style="color: rgb(102, 102, 102);">.</span>write(request<span style="color: rgb(102, 102, 102);">.</span>urlopen(url)<span style="color: rgb(102, 102, 102);">.</span>read())ls
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Now let’s try and get the contents of the file into IPython. We start off by creating a file object:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'r'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">The <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">'r'</tt> means that the file should be opened in <em style="line-height: inherit;">read</em> mode (i.e. you will get an error if the file does not exist). Now, simply type:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f<span style="color: rgb(102, 102, 102);">.</span>read()
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">and you will see something like this:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>f<span style="color: rgb(102, 102, 102);">.</span>read()<span style="color: rgb(51, 51, 51);">'RAJ        DEJ                          Jmag   e_Jmag\n2000 (deg) 2000</span><span style="color: rgb(51, 51, 51);">(deg) 2MASS             (mag)  (mag) \n---------- ----------</span><span style="color: rgb(51, 51, 51);">----------------- ------ ------\n010.684737 +41.269035 00424433+4116085</span><span style="color: rgb(51, 51, 51);">9.453  0.052\n010.683469 +41.268585 00424403+4116069   9.321</span><span style="color: rgb(51, 51, 51);">0.022\n010.685657 +41.269550 00424455+4116103  10.773  0.069\n010.686026</span><span style="color: rgb(51, 51, 51);">+41.269226 00424464+4116092   9.299  0.063\n010.683465 +41.269676</span><span style="color: rgb(51, 51, 51);">00424403+4116108  11.507  0.056\n010.686015 +41.269630</span><span style="color: rgb(51, 51, 51);">00424464+4116106   9.399  0.045\n010.685270 +41.267124</span><span style="color: rgb(51, 51, 51);">00424446+4116016  12.070  0.035\n'</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">The data file has been read in as a single string. Let’s try that again:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>f<span style="color: rgb(102, 102, 102);">.</span>read()<span style="color: rgb(51, 51, 51);">''</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">What’s happened? We read the file, and the file ‘pointer’ is now sitting at the end of the file, and there is nothing left to read. Let’s now try and do something more useful, and capture the contents of the file in a string:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'r'</span>)  <span style="color: rgb(64, 128, 144); font-style: italic;"># We need to re-open the file</span>data <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>read()f<span style="color: rgb(102, 102, 102);">.</span>close()
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Now <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">data</tt> contains a string:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span style="color: rgb(0, 112, 32);">type</span>(data)<span style="color: rgb(51, 51, 51);">&lt;type 'str'&gt;</span></pre></div></div><div style="margin-top: 10px; margin-bottom: 10px; padding: 0px; border-radius: 3px; border: 1px solid rgb(96, 144, 96); background-color: rgb(233, 255, 233);"><p style="font-size: 1.1em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; color: white; background-color: rgb(112, 160, 112);">Closing files</p><p style="margin: 0.5em 1em; padding: 0px;">Usually, you should close file when you are done with it to free up resources (memory). If you only have a couple of files in an interactive session, that is not dramatic. On the other hand, if you write scripts which deal with dozens of files, then you should start worrying about these things. Often you will see things like this:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">with</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'r'</span>) <span style="color: rgb(0, 112, 32); font-weight: bold;">as</span> f:
    <span style="color: rgb(64, 128, 144); font-style: italic;"># do things with your file</span>
    data <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>read()

<span style="color: rgb(0, 112, 32);">type</span>(data)
</pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">Notice the indent under the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">with</tt>. At the end of that block the file is automatically closed, even if things went wrong and an error occured inside the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">with</tt> block.</p></div><p style="margin-top: 0px; margin-bottom: 9px;">But what we’d really like to do is read the file line by line. There are several ways to do this, the simplest of which is to use a <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">for</tt> loop in the following way:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'r'</span>)<span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> line <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> f:
    <span style="color: rgb(0, 112, 32); font-weight: bold;">print</span>(<span style="color: rgb(0, 112, 32);">repr</span>(line))
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Notice the indent before <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">print</tt>, which is necessary to indicate that we are inside the loop (there is no <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">end for</tt> in Python). Note that we are using <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">repr()</tt> to show any invisible characters (this will be useful in a minute). The output should now look something like this:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span><span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> line <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> f:<span style="color: rgb(51, 51, 51);">        print(repr(line))</span>

<span style="color: rgb(51, 51, 51);">'RAJ        DEJ                          Jmag   e_Jmag\n'</span><span style="color: rgb(51, 51, 51);">'2000 (deg) 2000 (deg) 2MASS             (mag)  (mag) \n'</span><span style="color: rgb(51, 51, 51);">'---------- ---------- ----------------- ------ ------\n'</span><span style="color: rgb(51, 51, 51);">'010.684737 +41.269035 00424433+4116085   9.453  0.052\n'</span><span style="color: rgb(51, 51, 51);">'010.683469 +41.268585 00424403+4116069   9.321  0.022\n'</span><span style="color: rgb(51, 51, 51);">'010.685657 +41.269550 00424455+4116103  10.773  0.069\n'</span><span style="color: rgb(51, 51, 51);">'010.686026 +41.269226 00424464+4116092   9.299  0.063\n'</span><span style="color: rgb(51, 51, 51);">'010.683465 +41.269676 00424403+4116108  11.507  0.056\n'</span><span style="color: rgb(51, 51, 51);">'010.686015 +41.269630 00424464+4116106   9.399  0.045\n'</span><span style="color: rgb(51, 51, 51);">'010.685270 +41.267124 00424446+4116016  12.070  0.035\n'</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Each line is being returned as a string. Notice the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">\n</tt> at the end of each line - this is a line return character, which indicates the end of a line.</p><div style="margin-top: 10px; margin-bottom: 10px; padding: 0px; border-radius: 3px; border: 1px solid rgb(96, 144, 96); background-color: rgb(233, 255, 233);"><p style="font-size: 1.1em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; color: white; background-color: rgb(112, 160, 112);">Note</p><p style="margin: 0.5em 1em; padding: 0px;">You may also come across the following way to read files line by line:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> line <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> f<span style="color: rgb(102, 102, 102);">.</span>readlines():
    <span style="color: rgb(102, 102, 102);">...</span></pre></div></div><p style="margin: 0.5em 1em; padding: 0px;"><tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">f.readlines()</tt> actually reads in the whole file and splits it into a list of lines, so for large files this can be memory intensive. Using:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> line <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> f:
    <span style="color: rgb(102, 102, 102);">...</span></pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">instead is more memory efficient because it only reads one line at a time.</p></div><p style="margin-top: 0px; margin-bottom: 9px;">Now we’re reading in a file line by line, what would be really nice would be to get some values out of it. Let’s examine the last line in detail. If we just type <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">line</tt> we should see the last line that was printed in the loop:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>line<span style="color: rgb(51, 51, 51);">'010.685270 +41.267124 00424446+4116016  12.070  0.035\n'</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">We can first get rid of the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">\n</tt> character with:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>line <span style="color: rgb(102, 102, 102);">=</span> line<span style="color: rgb(102, 102, 102);">.</span>strip()<span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>line<span style="color: rgb(51, 51, 51);">'010.685270 +41.267124 00424446+4116016  12.070  0.035'</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Next, we can use what we learned about strings and lists to do:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>columns <span style="color: rgb(102, 102, 102);">=</span> line<span style="color: rgb(102, 102, 102);">.</span>split()<span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>columns<span style="color: rgb(51, 51, 51);">['010.685270', '+41.267124', '00424446+4116016', '12.070', '0.035']</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Finally, let’s say we care about the source name, and the J band magnitude. We can extract these with:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>name <span style="color: rgb(102, 102, 102);">=</span> columns[<span style="color: rgb(32, 128, 80);">2</span>]<span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>j <span style="color: rgb(102, 102, 102);">=</span> columns[<span style="color: rgb(32, 128, 80);">3</span>]

<span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>name<span style="color: rgb(51, 51, 51);">'00424446+4116016'</span>

<span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>j<span style="color: rgb(51, 51, 51);">'12.070'</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Note that <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">j</tt> is a string, but if we want a floating point number, we can instead do:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><span style="cursor: pointer; position: absolute; top: 0px; right: 0px; border: 1px solid rgba(0, 0, 0, 0.117647); color: rgba(0, 0, 0, 0.117647); font-family: monospace; padding-left: 0.2em; padding-right: 0.2em; border-radius: 0px 3px 0px 0px;" title="Hide the prompts and output">&gt;&gt;&gt;</span><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(198, 93, 9); font-weight: bold;">&gt;&gt;&gt; </span>j <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">float</span>(columns[<span style="color: rgb(32, 128, 80);">3</span>])
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">One last piece of information we need about files is how we can read a single line. This is done using:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
line <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">We can put all this together to write a little script to read the data from the file and display the columns we care about to the screen! Here is is:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(64, 128, 144); font-style: italic;"># Open file</span>f <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'r'</span>)

<span style="color: rgb(64, 128, 144); font-style: italic;"># Read and ignore header lines</span>header1 <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()header2 <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()header3 <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()

<span style="color: rgb(64, 128, 144); font-style: italic;"># Loop over lines and extract variables of interest</span><span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> line <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> f:
    line <span style="color: rgb(102, 102, 102);">=</span> line<span style="color: rgb(102, 102, 102);">.</span>strip()
    columns <span style="color: rgb(102, 102, 102);">=</span> line<span style="color: rgb(102, 102, 102);">.</span>split()
    name <span style="color: rgb(102, 102, 102);">=</span> columns[<span style="color: rgb(32, 128, 80);">2</span>]
    j <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">float</span>(columns[<span style="color: rgb(32, 128, 80);">3</span>])
    <span style="color: rgb(0, 112, 32); font-weight: bold;">print</span>(name, j)

f<span style="color: rgb(102, 102, 102);">.</span>close()
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">The output should look like this:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
00424433+4116085 9.453
00424403+4116069 9.321
00424455+4116103 10.773
00424464+4116092 9.299
00424403+4116108 11.507
00424464+4116106 9.399
00424446+4116016 12.07
</pre></div></div><div style="margin-top: 10px; margin-bottom: 10px; padding: 0px; border-radius: 3px; border: 1px solid rgb(96, 144, 96); background-color: rgb(233, 255, 233);"><p style="font-size: 1.1em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; color: white; background-color: rgb(112, 160, 112);">Exercise</p><p style="margin: 0.5em 1em; padding: 0px;">Try and see if you can understand what the following script is doing:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data.txt'</span>, <span style="color: rgb(64, 112, 160);">'r'</span>)header1 <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()header2 <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()header3 <span style="color: rgb(102, 102, 102);">=</span> f<span style="color: rgb(102, 102, 102);">.</span>readline()data <span style="color: rgb(102, 102, 102);">=</span> []<span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> line <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> f:
    line <span style="color: rgb(102, 102, 102);">=</span> line<span style="color: rgb(102, 102, 102);">.</span>strip()
    columns <span style="color: rgb(102, 102, 102);">=</span> line<span style="color: rgb(102, 102, 102);">.</span>split()
    source <span style="color: rgb(102, 102, 102);">=</span> {}
    source[<span style="color: rgb(64, 112, 160);">'name'</span>] <span style="color: rgb(102, 102, 102);">=</span> columns[<span style="color: rgb(32, 128, 80);">2</span>]
    source[<span style="color: rgb(64, 112, 160);">'j'</span>] <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">float</span>(columns[<span style="color: rgb(32, 128, 80);">3</span>])
    data<span style="color: rgb(102, 102, 102);">.</span>append(source)
</pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">After this script is run, how would you access the name and J-band magnitude of the third source?</p></div><p style="font-size: 0.9em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(134, 152, 155); color: white; background-color: rgb(175, 193, 196);">Click to Show/Hide Solution</p></div><div><h3 style="margin: 0.7em 0px 0px; line-height: 1.5em; font-size: 18px;">Writing<a href="https://python4astronomers.github.io/files/asciifiles.html#writing" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h3><p style="margin-top: 0px; margin-bottom: 9px;">To open a file for writing, use:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">open</span>(<span style="color: rgb(64, 112, 160);">'data_new.txt'</span>, <span style="color: rgb(64, 112, 160);">'wb'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Then simply use <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">f.write()</tt> to write any content to the file, for example:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f<span style="color: rgb(102, 102, 102);">.</span>write(<span style="color: rgb(64, 112, 160);">&quot;Hello, World!</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">&quot;</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">If you want to write multiple lines, you can either give a list of strings to the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">writelines()</tt> method:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f<span style="color: rgb(102, 102, 102);">.</span>writelines([<span style="color: rgb(64, 112, 160);">'spam</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">'</span>, <span style="color: rgb(64, 112, 160);">'egg</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">'</span>, <span style="color: rgb(64, 112, 160);">'spam</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">'</span>])
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">or you can write them as a single string:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f<span style="color: rgb(102, 102, 102);">.</span>write(<span style="color: rgb(64, 112, 160);">'spam</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">egg</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">spam'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">To close a file, simply use:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
f<span style="color: rgb(102, 102, 102);">.</span>close()
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">(this also applies to reading files)</p><div style="margin-top: 10px; margin-bottom: 10px; padding: 0px; border-radius: 3px; border: 1px solid rgb(96, 144, 96); background-color: rgb(233, 255, 233);"><p style="font-size: 1.1em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; color: white; background-color: rgb(112, 160, 112);">Exercise</p><p style="margin: 0.5em 1em; padding: 0px;">Let’s try combining reading and writing. Using at most seven lines, write a script which will read in <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">data.txt</tt>, replace any spaces with periods (<tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">.</tt>), and write the result out to a file called <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">data_new.txt</tt>.</p><p style="margin: 0.5em 1em; padding: 0px;">Can you do it in a single line? (you can ignore closing the file)</p></div><p style="font-size: 0.9em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(134, 152, 155); color: white; background-color: rgb(175, 193, 196);">Click to Show/Hide Solution</p></div></div><div style="color: rgb(64, 64, 64); font-family: &apos;Helvetica Neue&apos;, Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; widows: 1; background-color: rgb(255, 255, 255);"><h2 style="margin: 1em 0px 0.5em; line-height: 1.2em; font-size: 21px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(64, 64, 64);">astropy.io.ascii<a href="https://python4astronomers.github.io/files/asciifiles.html#astropy-io-ascii" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h2><p style="margin-top: 0px; margin-bottom: 9px;">In the previous section you learned about reading and writing tabular data files using direct Python I/O and simple parsing and type-conversion rules. This is important base knowledge, but in real-world use when dealing with ASCII data files there are many complications and we recommend using the <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> module. It natively understands (and can automatically detect) most of the formats which astronomers typically encounter. As of Astropy 1.0 it includes C-based read and write methods which are much faster than any pure-Python implementations.</p><p style="margin-top: 0px; margin-bottom: 9px;">The <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> module supports these formats:</p><ul style="margin-left: 0px; padding: 0px 0px 0px 25px; list-style-position: initial; list-style-image: initial;"><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.AASTex.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">AASTex</a>: AASTeX <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">deluxetable</tt> used for AAS journals</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Basic.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Basic</a>: basic table with customizable delimiters and header configurations</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Cds.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Cds</a>: <a href="http://vizier.u-strasbg.fr/doc/catstd.htx" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">CDS format table</a> (also Vizier and ApJ machine readable tables)</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.CommentedHeader.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">CommentedHeader</a>: column names given in a line that begins with the comment character</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.daophot.Daophot.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Daophot</a>: table from the IRAF DAOphot package</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Ecsv.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">ECSV</a>: Enhanced Character-Separated-Values</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.FixedWidth.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">FixedWidth</a>: table with fixed-width columns (see also <a href="http://docs.astropy.org/en/stable/io/ascii/fixed_width_gallery.html#fixed-width-gallery" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">fixed_width_gallery</a>)</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Ipac.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Ipac</a>: <a href="http://irsa.ipac.caltech.edu/applications/DDGEN/Doc/ipac_tbl.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">IPAC format table</a></li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.HTML.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">HTML</a>: HTML format table contained in a &lt;table&gt; tag</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Latex.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Latex</a>: LaTeX table with datavalue in the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">tabular</tt> environment</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.NoHeader.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">NoHeader</a>: basic table with no header where columns are auto-named</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Rdb.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Rdb</a>: tab-separated values with an extra line after the column definition line</li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.SExtractor.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">SExtractor</a>: <a href="http://www.astromatic.net/software/sextractor" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">SExtractor format table</a></li><li><a href="http://docs.astropy.org/en/stable/api/astropy.io.ascii.Tab.html" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Tab</a>: tab-separated values</li></ul><div><h3 style="margin: 0.7em 0px 0px; line-height: 1.5em; font-size: 18px;">Reading tables<a href="https://python4astronomers.github.io/files/asciifiles.html#reading-tables" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h3><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">astropy.io</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> asciitable <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(64, 112, 160);">&quot;&quot;&quot;</span><span style="color: rgb(64, 112, 160);">col1 col2 col3</span><span style="color: rgb(64, 112, 160);">1    2    &quot;hi there&quot;</span><span style="color: rgb(64, 112, 160);">3    4.2  world&quot;&quot;&quot;</span>data <span style="color: rgb(102, 102, 102);">=</span> ascii<span style="color: rgb(102, 102, 102);">.</span>read(table)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">The first and most important argument to the <a href="http://docs.astropy.org/en/stable/io/ascii/read.html#parameters-for-read" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">ascii.read()</a> function is the table input. There is some flexibility here and you can supply any of the following:</p><blockquote><div><ul style="margin-left: 0px; padding: 0px 0px 0px 25px; list-style-position: initial; list-style-image: initial;"><li>Name of a file (string)</li><li>Single string containing all table lines separated by newlines</li><li>File-like object with a callable read() method</li><li>List of strings where each list element is a table line</li></ul></div></blockquote><div><h4 style="margin: 0.7em 0px 0px; line-height: 1.5em; font-size: 16px;">Guessing<a href="https://python4astronomers.github.io/files/asciifiles.html#guessing" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h4><p style="margin-top: 0px; margin-bottom: 9px;">Even though it seems obvious to a human, parsing this table to get the right column names, data values and data types is not trivial. <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> needed to figure out (or guess):</p><ul style="margin-left: 0px; padding: 0px 0px 0px 25px; list-style-position: initial; list-style-image: initial;"><li>Overall table format (DAOphot, CDS, RDB, Basic, etc)</li><li>Column delimiter, e.g. space, comma, tab, vertical bar, etc.</li><li>Column names (which row, maybe preceded by #)</li><li>Quote character (single or double quote)</li></ul><p style="margin-top: 0px; margin-bottom: 9px;">By default <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> will try each format it knows and use the first one that gives a “reasonable” answer. The details are in the <a href="http://docs.astropy.org/en/stable/io/ascii/read.html#guess-table-format" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">Guess table format</a> section. Sometimes it will fail, e.g.:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
table <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(64, 112, 160);">&quot;&quot;&quot;</span><span style="color: rgb(64, 112, 160);">col1 &amp; col2</span><span style="color: rgb(64, 112, 160);">  1  &amp; hi there</span><span style="color: rgb(64, 112, 160);">  3  &amp; world</span><span style="color: rgb(64, 112, 160);">&quot;&quot;&quot;</span>ascii<span style="color: rgb(102, 102, 102);">.</span>read(table)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">This gives an ominous looking stack trace, but actually all that happened is that <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> guessed every format it knows and nothing worked. The standard set of column delimiters is space, comma, tab, and the vertical bar. In this case you simply need to give it some help:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
ascii<span style="color: rgb(102, 102, 102);">.</span>read(table, delimiter<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(64, 112, 160);">&quot;&amp;&quot;</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">The full list of parameters for reading includes common options like <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">format</tt>, <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">delimiter</tt>, <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">quote_char</tt>, and<tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">comment</tt>.</p></div><div><h4 style="margin: 0.7em 0px 0px; line-height: 1.5em; font-size: 16px;">No guessing<a href="https://python4astronomers.github.io/files/asciifiles.html#no-guessing" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h4><p style="margin-top: 0px; margin-bottom: 9px;">For some tricky tables you will want to disable guessing and explicitly provide the relevant table format information to the <a href="http://docs.astropy.org/en/stable/io/ascii/read.html#parameters-for-read" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">ascii.read()</a> function. A big advantage in this strategy is that <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> can then provide more detailed information if it still fails to parse the table, e.g.:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
ascii<span style="color: rgb(102, 102, 102);">.</span>read(table, guess<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(0, 112, 32);">False</span>, format<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(64, 112, 160);">'basic'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">This produces a message (after the stacktrace) that should be a pretty good clue that <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> is using the wrong column delimiter:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
InconsistentTableError: Number of header columns (3) inconsistent with data columns (4) at data line 0
Header values: ['col1', '&amp;', 'col2']
Data values: ['1', '&amp;', 'hi', 'there']
</pre></div></div></div></div><div><h3 style="margin: 0.7em 0px 0px; line-height: 1.5em; font-size: 18px;">Writing<a href="https://python4astronomers.github.io/files/asciifiles.html#id1" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h3><p style="margin-top: 0px; margin-bottom: 9px;">You can write ASCII tables using the <a href="http://docs.astropy.org/en/stable/io/ascii/index.html#writing-tables" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">ascii.write()</a> function. There is a lot of flexibility in the format of the input data to be written:</p><ul style="margin-left: 0px; padding: 0px 0px 0px 25px; list-style-position: initial; list-style-image: initial;"><li>NumPy structured array or record array</li><li>astropy Table object</li><li>Sequence of sequences</li><li>Dict of sequences</li></ul><p style="margin-top: 0px; margin-bottom: 9px;">As a first simple example, read a comma-delimited table and then write it out as space-delimited:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
table <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(64, 112, 160);">&quot;&quot;&quot;</span><span style="color: rgb(64, 112, 160);">col1,col2,col3</span><span style="color: rgb(64, 112, 160);">1,hello world,2.5</span><span style="color: rgb(64, 112, 160);">3,again,5.0&quot;&quot;&quot;</span>dat <span style="color: rgb(102, 102, 102);">=</span> ascii<span style="color: rgb(102, 102, 102);">.</span>read(table)

<span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">sys</span>ascii<span style="color: rgb(102, 102, 102);">.</span>write(dat, sys<span style="color: rgb(102, 102, 102);">.</span>stdout)  <span style="color: rgb(64, 128, 144); font-style: italic;"># print to terminal instead of to file</span></pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">We can use a different column delimiter:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
ascii<span style="color: rgb(102, 102, 102);">.</span>write(dat, sys<span style="color: rgb(102, 102, 102);">.</span>stdout, delimiter<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(64, 112, 160);">'|'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">or a different table writer class:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
ascii<span style="color: rgb(102, 102, 102);">.</span>write(dat, sys<span style="color: rgb(102, 102, 102);">.</span>stdout, format<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(64, 112, 160);">'latex'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">As a final example, imagine you’ve gathered basic information about 5 galaxies which you want to write as an ASCII table. You could just use pure Python file I/O as shown earlier, but then you may need to be careful about quoting and formatting (and why rewrite the same code every time when it is already done!). Instead just use <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a>:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
types = ['barred spiral', 'spiral', 'peculiar (ring)', 'elliptical', 'elliptical']
redshifts = np.array([0.024221, 0.132, 0.22, 0.34, 0.45])
lums = np.array([1e40, 1.2e40, 2e40, 3e40, 4e40])
table = {'type': types, 'redshift': redshifts, 'lum': lums}

ascii.write(table, 'galaxies.dat', formats={'redshift': '%.5f', 'lum': '%.2e'})
cat galaxies.dat
</pre></div></div><div style="margin-top: 10px; margin-bottom: 10px; padding: 0px; border-radius: 3px; border: 1px solid rgb(96, 144, 96); background-color: rgb(233, 255, 233);"><p style="font-size: 1.1em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; color: white; background-color: rgb(112, 160, 112);">Exercise: scraping table data from the web</p><p style="margin: 0.5em 1em; padding: 0px;"><em style="line-height: inherit;">Note: this exercise only works on Python 2 due to BeautifulSoup doing something differently in Python 3. Five cheers to the person who can fix this!</em></p><p style="margin: 0.5em 1em; padding: 0px;">To do this exercise you must first install the <a href="http://www.crummy.com/software/BeautifulSoup/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">BeautifulSoup</a> package which will parse HTML pages into nice data structures. <strong style="font-style: inherit;">QUIT</strong> your IPython session and from the command line do:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
pip install --upgrade beautifulsoup4
</pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">Now start IPython again. The exercise is to grab the table data from the <a href="http://hea-www.harvard.edu/XJET/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">XJET catalog page</a> into a Python data structure. First we’ll show you the really easy answer using the HTML reading capability of <a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a>:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
dat <span style="color: rgb(102, 102, 102);">=</span> ascii<span style="color: rgb(102, 102, 102);">.</span>read(<span style="color: rgb(64, 112, 160);">'http://hea-www.harvard.edu/XJET/'</span>,
                 format<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(64, 112, 160);">'html'</span>,
                 htmldict<span style="color: rgb(102, 102, 102);">=</span>{<span style="color: rgb(64, 112, 160);">'table_id'</span>:<span style="color: rgb(32, 128, 80);">2</span>},  <span style="color: rgb(64, 128, 144); font-style: italic;"># Get data from the second table</span>
                 fill_values<span style="color: rgb(102, 102, 102);">=</span>(<span style="color: rgb(64, 112, 160);">''</span>, <span style="color: rgb(64, 112, 160);">'-1'</span>),   <span style="color: rgb(64, 128, 144); font-style: italic;"># Fill blank entries with -1</span>
                 header_start<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(32, 128, 80);">0</span>,           <span style="color: rgb(64, 128, 144); font-style: italic;"># Row 0 is header with column names</span>
                 data_start<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(32, 128, 80);">1</span>)             <span style="color: rgb(64, 128, 144); font-style: italic;"># Row 1 is start of table data</span></pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">But in order to understand the guts of how this works, start by defining following function which converts an HTML table to a list of lines with tab-separated values (this will be more clear in the next part):</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">bs4</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> BeautifulSoup<span style="color: rgb(0, 112, 32); font-weight: bold;">def</span> <span style="color: rgb(6, 40, 126);">html2tsv</span>(html, index<span style="color: rgb(102, 102, 102);">=</span><span style="color: rgb(32, 128, 80);">0</span>):
    <span style="color: rgb(64, 112, 160); font-style: italic;">&quot;&quot;&quot;Parse the index'th HTML table in ``html``.  Return table as a list of</span><span style="color: rgb(64, 112, 160); font-style: italic;">    tab-separated ASCII table lines&quot;&quot;&quot;</span>
    soup <span style="color: rgb(102, 102, 102);">=</span> BeautifulSoup(html)
    tables <span style="color: rgb(102, 102, 102);">=</span> soup<span style="color: rgb(102, 102, 102);">.</span>findAll(<span style="color: rgb(64, 112, 160);">'table'</span>)
    table <span style="color: rgb(102, 102, 102);">=</span> tables[index]
    out <span style="color: rgb(102, 102, 102);">=</span> []
    <span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> row <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> table<span style="color: rgb(102, 102, 102);">.</span>findAll(<span style="color: rgb(64, 112, 160);">'tr'</span>):
        colvals <span style="color: rgb(102, 102, 102);">=</span> [col<span style="color: rgb(102, 102, 102);">.</span>text <span style="color: rgb(0, 112, 32); font-weight: bold;">for</span> col <span style="color: rgb(0, 112, 32); font-weight: bold;">in</span> row<span style="color: rgb(102, 102, 102);">.</span>findAll(<span style="color: rgb(64, 112, 160);">'td'</span>)]
        out<span style="color: rgb(102, 102, 102);">.</span>append(<span style="color: rgb(64, 112, 160);">'</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\t</span><span style="color: rgb(64, 112, 160);">'</span><span style="color: rgb(102, 102, 102);">.</span>join(colvals))
    <span style="color: rgb(0, 112, 32); font-weight: bold;">return</span> out
</pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">You’ll want to start with:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin: 0.4em 1em; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">astropy.extern.six.moves.urllib</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> request<span style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">astropy.io</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> asciihtml <span style="color: rgb(102, 102, 102);">=</span> request<span style="color: rgb(102, 102, 102);">.</span>urlopen(<span style="color: rgb(64, 112, 160);">'http://hea-www.harvard.edu/XJET/'</span>)<span style="color: rgb(102, 102, 102);">.</span>read()  <span style="color: rgb(64, 128, 144); font-style: italic;"># Get web page as string</span>table1 <span style="color: rgb(102, 102, 102);">=</span> html2tsv(html, <span style="color: rgb(32, 128, 80);">0</span>)   <span style="color: rgb(64, 128, 144); font-style: italic;"># Parse the first table in the web page</span>table2 <span style="color: rgb(102, 102, 102);">=</span> html2tsv(html, <span style="color: rgb(32, 128, 80);">1</span>)   <span style="color: rgb(64, 128, 144); font-style: italic;"># Parse the second table</span>table3 <span style="color: rgb(102, 102, 102);">=</span> html2tsv(html, <span style="color: rgb(32, 128, 80);">2</span>)   <span style="color: rgb(64, 128, 144); font-style: italic;"># Parse the third table</span></pre></div></div><p style="margin: 0.5em 1em; padding: 0px;">Now examine what you got in the <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">table</tt> variables and use <a href="http://docs.astropy.org/en/stable/io/ascii/read.html#parameters-for-read" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">ascii.read()</a> to parse the right one into a table. Then plot a histogram of the redshift distribution in this sample.</p><p style="margin: 0.5em 1em; padding: 0px;"><strong style="font-style: inherit;">HINT</strong>: the table has missing values so include <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">fill_values=('', '-1')</tt> in the call to <a href="http://docs.astropy.org/en/stable/io/ascii/read.html#parameters-for-read" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">ascii.read()</a>.<a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> has robust functionality to <a href="http://docs.astropy.org/en/stable/io/ascii/read.html#replace-bad-or-missing-values" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">replace bad or missing values</a>.</p></div><p style="font-size: 0.9em; font-weight: bold; margin: 0px; padding: 0.1em 0px 0.1em 0.5em; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(134, 152, 155); color: white; background-color: rgb(175, 193, 196);">Click to Show/Hide Solution</p></div></div><div style="color: rgb(64, 64, 64); font-family: &apos;Helvetica Neue&apos;, Helvetica, Arial, sans-serif; font-size: 13px; line-height: 18px; widows: 1; background-color: rgb(255, 255, 255);"><h2 style="margin: 1em 0px 0.5em; line-height: 1.2em; font-size: 21px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(64, 64, 64);">Numpy<a href="https://python4astronomers.github.io/files/asciifiles.html#numpy" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit; font-weight: inherit; visibility: hidden; font-size: 0.8em; padding: 0px 4px;" title="Permalink to this headline"></a></h2><p style="margin-top: 0px; margin-bottom: 9px;">Numpy provides two functions to read in ASCII data which we describe here for completeness. In most cases the<a href="http://docs.astropy.org/en/stable/io/ascii/" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">astropy.io.ascii</a> functionality is recommended since it is more flexible and generally faster.</p><p style="margin-top: 0px; margin-bottom: 9px;"><tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">np.loadtxt</tt> is meant for relatively simple tables without missing values:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);"><span style="color: rgb(64, 128, 144); font-style: italic;"># Pretend your variable is really a file because loadtxt expect</span><span style="color: rgb(64, 128, 144); font-style: italic;"># a filename as input</span><span style="color: rgb(0, 112, 32); font-weight: bold;">from</span> <span style="color: rgb(14, 132, 181); font-weight: bold;">astropy.extern.six.moves</span> <span style="color: rgb(0, 112, 32); font-weight: bold;">import</span> cStringIO <span style="color: rgb(0, 112, 32); font-weight: bold;">as</span> StringIO

c <span style="color: rgb(102, 102, 102);">=</span> StringIO(<span style="color: rgb(64, 112, 160);">&quot;0 1</span><span style="color: rgb(64, 112, 160); font-weight: bold;">\n</span><span style="color: rgb(64, 112, 160);">2 3&quot;</span>)np<span style="color: rgb(102, 102, 102);">.</span>loadtxt(c)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Here is a more complicated example, that is actually useful:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
d <span style="color: rgb(102, 102, 102);">=</span> StringIO(<span style="color: rgb(64, 112, 160);">'''</span><span style="color: rgb(64, 112, 160);"># Abundances of different elements</span><span style="color: rgb(64, 112, 160);"># for TW Hya</span><span style="color: rgb(64, 112, 160);"># taken from Guenther et al. (2007)</span><span style="color: rgb(64, 112, 160);"># element, abund, error, first-ionisation-potential [eV]</span><span style="color: rgb(64, 112, 160);">C  0.2  0.03 11.3</span><span style="color: rgb(64, 112, 160);">N  0.51 0.05 14.6</span><span style="color: rgb(64, 112, 160);">O  0.25 0.01 13.6</span><span style="color: rgb(64, 112, 160);">Ne 2.46 0.08 21.6</span><span style="color: rgb(64, 112, 160);">Fe 0.19 0.01  7.9</span><span style="color: rgb(64, 112, 160);">'''</span>)data <span style="color: rgb(102, 102, 102);">=</span> np<span style="color: rgb(102, 102, 102);">.</span>loadtxt(d, dtype<span style="color: rgb(102, 102, 102);">=</span>{<span style="color: rgb(64, 112, 160);">'names'</span>: (<span style="color: rgb(64, 112, 160);">'elem'</span>, <span style="color: rgb(64, 112, 160);">'abund'</span>, <span style="color: rgb(64, 112, 160);">'error'</span>, \
    <span style="color: rgb(64, 112, 160);">'FIP'</span>),<span style="color: rgb(64, 112, 160);">'formats'</span>: (<span style="color: rgb(64, 112, 160);">'S2'</span>, <span style="color: rgb(64, 112, 160);">'f4'</span>, <span style="color: rgb(64, 112, 160);">'f4'</span>, <span style="color: rgb(64, 112, 160);">'f4'</span>)})

plt<span style="color: rgb(102, 102, 102);">.</span>errorbar(data[<span style="color: rgb(64, 112, 160);">'FIP'</span>], data[<span style="color: rgb(64, 112, 160);">'abund'</span>], yerr <span style="color: rgb(102, 102, 102);">=</span> data[<span style="color: rgb(64, 112, 160);">'error'</span>], fmt <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(64, 112, 160);">'o'</span>)
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">The resulting plot clearly shows the inverse first ionization potential effect. That means, that elements of a large FIP are enhanced in the corona.</p><p style="margin-top: 0px; margin-bottom: 9px;">The second command <tt style="margin: 0px 2px; padding: 0px 5px; border: 1px solid rgba(0, 0, 0, 0.117188); border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; background-color: rgb(248, 248, 248);">np.genfromtxt</tt> is more versatile. It can fill missing values in a table, read column names, exclude some columns etc. Here is an example (which only works in Python 2 as of Numpy 1.9):</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
d <span style="color: rgb(102, 102, 102);">=</span> StringIO(<span style="color: rgb(64, 112, 160);">'''</span><span style="color: rgb(64, 112, 160);">#element abund error FIP</span><span style="color: rgb(64, 112, 160);">C  0.2  0.03 11.3</span><span style="color: rgb(64, 112, 160);">N  0.51 0.05 14.6</span><span style="color: rgb(64, 112, 160);">O  0.25 0.01 13.6</span><span style="color: rgb(64, 112, 160);">Ne 2.46 0.08 21.6</span><span style="color: rgb(64, 112, 160);">S  nn   nn   10.4</span><span style="color: rgb(64, 112, 160);">Fe 0.19 0.01  7.9</span><span style="color: rgb(64, 112, 160);">other elements were not meesured</span><span style="color: rgb(64, 112, 160);">'''</span>)data <span style="color: rgb(102, 102, 102);">=</span> np<span style="color: rgb(102, 102, 102);">.</span>genfromtxt(d, dtype<span style="color: rgb(102, 102, 102);">=</span>(<span style="color: rgb(64, 112, 160);">'S2'</span>, <span style="color: rgb(64, 112, 160);">'f4'</span>, <span style="color: rgb(64, 112, 160);">'f4'</span>, <span style="color: rgb(64, 112, 160);">'f4'</span>), names <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(0, 112, 32);">True</span>, \
     skip_footer <span style="color: rgb(102, 102, 102);">=</span> <span style="color: rgb(32, 128, 80);">1</span>, missing_values <span style="color: rgb(102, 102, 102);">=</span> (<span style="color: rgb(64, 112, 160);">'nn'</span>), filling_values<span style="color: rgb(102, 102, 102);">=</span>(np<span style="color: rgb(102, 102, 102);">.</span>nan))
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">Examine what was returned:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
data
</pre></div></div><p style="margin-top: 0px; margin-bottom: 9px;">This is an instance of the NumPy <a href="http://docs.scipy.org/doc/numpy/user/basics.rec.html#module-numpy.doc.structured_arrays" style="color: rgb(0, 105, 214); text-decoration: none; line-height: inherit;">structured array</a> type, which is an efficient way to manipulate records of tabular data. It stores columns of typed data and you can access either a column of data or a row of data at once:</p><div style="position: relative;"><div style="background: rgb(238, 255, 204);"><pre style="overflow-x: auto; overflow-y: hidden; padding: 8.5px; border-top-left-radius: 3px; border-top-right-radius: 3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px; margin-top: 0px; margin-bottom: 18px; border: 1px solid rgba(0, 0, 0, 0.117188); white-space: pre-wrap; word-wrap: break-word; background-color: rgb(248, 248, 248);">
data<span style="color: rgb(102, 102, 102);">.</span>dtypedata[<span style="color: rgb(32, 128, 80);">1</span>]data[<span style="color: rgb(64, 112, 160);">'abund'</span>]
</pre></div></div></div></div>
</div></body></html> 